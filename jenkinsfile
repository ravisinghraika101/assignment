pipeline {
    agent 
        
    stages {
        stage('Build Docker Image') {
            steps {
            checkout scm
    
            script {
                docker.build("my-docker-image:${env.BUILD_NUMBER}")
            }
        }
    }

        stage('Tag and Push Docker Image') {
            steps {
                script{
                    docker.withRegistry('https://hub.docker.com/repositories/ravisingh1234','DockerCred') {
                        def image = docker.image("my-docker-image:${env.BUILD_NUMBER}")
                        image.push()
                        image.push("${env.BUILD_NUMBER}")
                    }
                }
            }
        }
    }
}
                